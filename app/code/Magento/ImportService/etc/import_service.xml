<?xml version="1.0"?>
<!--
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */
-->
<imports xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_ImportService:etc/import_service.xsd">

    <import type="csv_to_magento_catalog_product_rest_api">
        <behaviours>
            <behaviour code="add_update">
                <storages>
                    <storage name="magento" class="Magento\ImportService\Model\Storage\MagentoRest" method="post">
                        <data>
                            <parameter name="restPath">/V1/products</parameter>
                        </data>
                    </storage>
                    <storage name="magento" class="Magento\ImportService\Model\Storage\MagentoRest" method="post">
                        <data>
                            <parameter name="restPath">/V1/products/links</parameter>
                        </data>
                    </storage>
                </storages>
            </behaviour>
            <behaviour code="delete">
                <storages>
                    <storage name="magento" class="MagentoRestApiClient" method="post">
                        <data>
                            <parameter name="restPath">/V1/products</parameter>
                        </data>
                    </storage>
                </storages>
            </behaviour>
        </behaviours>

        <mappingProcessor sourceClass="Magento\ImportServiceCsv\Model\CsvPathResolver" targetClass="Magento\ImportServiceCsv\Model\JsonPathResolver"/>

        <mappingFields>
            <field name="sku">
                <sourcePath>sku</sourcePath>
                <targetPath>product.sku</targetPath>
            </field>
            <field name="name">
                <sourcePath>name</sourcePath>
                <targetPath>product.name</targetPath>
            </field>
        </mappingFields>

    </import>

    <import type="xml_to_magento_catalog_product_rest_api">
        <behaviours>
            <behaviour code="add_update">
                <storages>
                    <storage name="magento" class="Magento\ImportService\Model\Storage\MagentoRest" method="post">
                        <data>
                            <parameter name="restPath">/V1/products</parameter>
                        </data>
                    </storage>
                </storages>
            </behaviour>
            <behaviour code="delete">
                <storages>
                    <storage name="magento" class="Magento\ImportService\Model\Storage\MagentoRest" method="post">
                        <data>
                            <parameter name="restPath">/V1/products</parameter>
                        </data>
                    </storage>
                </storages>
            </behaviour>
        </behaviours>

        <mappingProcessor sourceClass="Magento\ImportServiceXml\Model\XmlPathResolver" targetClass="Magento\ImportServiceCsv\Model\JsonPathResolver"/>

        <mappingFields>
            <field name="sku">
                <sourcePath>sku</sourcePath>
                <targetPath>product.sku</targetPath>
            </field>
            <field name="name">
                <sourcePath>name</sourcePath>
                <targetPath>product.name</targetPath>
            </field>
        </mappingFields>

    </import>

</imports>